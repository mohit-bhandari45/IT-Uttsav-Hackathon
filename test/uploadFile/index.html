<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Upload</title>
</head>

<body>
    <input type="file" class="files"/>
    <input type="file" class="files"/>
    <button onclick="uploadFile()">Upload</button>

    <script>
        async function uploadFile() {
            const formData = new FormData();
            const fileInputs = document.getElementsByClassName('files')
            // console.log(fileInputs)
            const userData = JSON.stringify({
                'name': "Someone"
            })

            for (let fileInput of fileInputs) {
                const file = fileInput.files[0];
                console.log(file)
                formData.append('files', file);
            }
            console.log(formData)
            formData.append('userData', userData)

            await fetch('http://localhost:3000/upload/', {
                mode: 'cors',
                method: 'POST',
                body: formData
            }).then(res => {
                console.log(res)
            }).catch(err=>{
                console.log(err)
            })
            
            console.log("over")

        }
    </script>

</body>

</html>